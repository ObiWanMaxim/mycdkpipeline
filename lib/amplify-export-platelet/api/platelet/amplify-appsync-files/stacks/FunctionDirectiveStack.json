{
  "Description": "An auto-generated nested stack for the @function directive.",
  "AWSTemplateFormatVersion": "2010-09-09",
  "Conditions": {
    "HasEnvironmentParameter": {
      "Fn::Not": [
        {
          "Fn::Equals": [
            {
              "Ref": "referencetotransformerrootstackenv10C5A902Ref"
            },
            "NONE"
          ]
        }
      ]
    }
  },
  "Resources": {
    "PlateletProfilePictureResolverLambdaDataSourceServiceRole413F6123": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PlateletProfilePictureResolverLambdaDataSourceServiceRoleDefaultPolicy52302F44": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": {
                "Fn::If": [
                  "HasEnvironmentParameter",
                  {
                    "Fn::Sub": [
                      "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureResolver-${env}",
                      {
                        "env": {
                          "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                        }
                      }
                    ]
                  },
                  {
                    "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureResolver"
                  }
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PlateletProfilePictureResolverLambdaDataSourceServiceRoleDefaultPolicy52302F44",
        "Roles": [
          {
            "Ref": "PlateletProfilePictureResolverLambdaDataSourceServiceRole413F6123"
          }
        ]
      }
    },
    "PlateletProfilePictureResolverLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PlateletProfilePictureResolverLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureResolver-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureResolver"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PlateletProfilePictureResolverLambdaDataSourceServiceRole413F6123",
            "Arn"
          ]
        }
      }
    },
    "InvokePlateletProfilePictureResolverLambdaDataSourceInvokePlateletProfilePictureResolverLambdaDataSourceAppSyncFunction7B2FC41A": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PlateletProfilePictureResolverLambdaDataSource",
            "Name"
          ]
        },
        "FunctionVersion": "2018-05-29",
        "Name": "InvokePlateletProfilePictureResolverLambdaDataSource",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletProfilePictureResolverLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletProfilePictureResolverLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PlateletProfilePictureResolverLambdaDataSource"
      ]
    },
    "UserprofilePictureURLResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "profilePictureURL",
        "TypeName": "User",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePlateletProfilePictureResolverLambdaDataSourceInvokePlateletProfilePictureResolverLambdaDataSourceAppSyncFunction7B2FC41A",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": {
          "Fn::Join": [
            "",
            [
              "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"User\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"profilePictureURL\"))\n$util.qr($ctx.stash.put(\"authRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackauthRoleNameFB872D50Ref"
              },
              "/CognitoIdentityCredentials\"))\n$util.qr($ctx.stash.put(\"unauthRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackunauthRoleName49F3C1FERef"
              },
              "/CognitoIdentityCredentials\"))\n{}\n## [End] Stash resolver specific context.. **"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/User.profilePictureURL.res.vtl"
            ]
          ]
        }
      }
    },
    "PlateletAdminAddNewUserLambdaDataSourceServiceRole7B65B2A1": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PlateletAdminAddNewUserLambdaDataSourceServiceRoleDefaultPolicyB2DC7E95": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": {
                "Fn::If": [
                  "HasEnvironmentParameter",
                  {
                    "Fn::Sub": [
                      "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminAddNewUser-${env}",
                      {
                        "env": {
                          "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                        }
                      }
                    ]
                  },
                  {
                    "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminAddNewUser"
                  }
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PlateletAdminAddNewUserLambdaDataSourceServiceRoleDefaultPolicyB2DC7E95",
        "Roles": [
          {
            "Ref": "PlateletAdminAddNewUserLambdaDataSourceServiceRole7B65B2A1"
          }
        ]
      }
    },
    "PlateletAdminAddNewUserLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PlateletAdminAddNewUserLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminAddNewUser-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminAddNewUser"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PlateletAdminAddNewUserLambdaDataSourceServiceRole7B65B2A1",
            "Arn"
          ]
        }
      }
    },
    "InvokePlateletAdminAddNewUserLambdaDataSourceInvokePlateletAdminAddNewUserLambdaDataSourceAppSyncFunction56567F02": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PlateletAdminAddNewUserLambdaDataSource",
            "Name"
          ]
        },
        "FunctionVersion": "2018-05-29",
        "Name": "InvokePlateletAdminAddNewUserLambdaDataSource",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletAdminAddNewUserLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletAdminAddNewUserLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PlateletAdminAddNewUserLambdaDataSource"
      ]
    },
    "MutationregisterUserResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "registerUser",
        "TypeName": "Mutation",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "MutationRegisterUserAuthFNMutationRegisterUserAuthFNAppSyncFunctionA363AAEB",
                "FunctionId"
              ]
            },
            {
              "Fn::GetAtt": [
                "InvokePlateletAdminAddNewUserLambdaDataSourceInvokePlateletAdminAddNewUserLambdaDataSourceAppSyncFunction56567F02",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": {
          "Fn::Join": [
            "",
            [
              "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Mutation\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"registerUser\"))\n$util.qr($ctx.stash.put(\"authRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackauthRoleNameFB872D50Ref"
              },
              "/CognitoIdentityCredentials\"))\n$util.qr($ctx.stash.put(\"unauthRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackunauthRoleName49F3C1FERef"
              },
              "/CognitoIdentityCredentials\"))\n{}\n## [End] Stash resolver specific context.. **"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Mutation.registerUser.res.vtl"
            ]
          ]
        }
      }
    },
    "PlateletAddNewTenantLambdaDataSourceServiceRoleD4D946B2": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PlateletAddNewTenantLambdaDataSourceServiceRoleDefaultPolicyD226A131": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": {
                "Fn::If": [
                  "HasEnvironmentParameter",
                  {
                    "Fn::Sub": [
                      "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAddNewTenant-${env}",
                      {
                        "env": {
                          "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                        }
                      }
                    ]
                  },
                  {
                    "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAddNewTenant"
                  }
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PlateletAddNewTenantLambdaDataSourceServiceRoleDefaultPolicyD226A131",
        "Roles": [
          {
            "Ref": "PlateletAddNewTenantLambdaDataSourceServiceRoleD4D946B2"
          }
        ]
      }
    },
    "PlateletAddNewTenantLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PlateletAddNewTenantLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAddNewTenant-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAddNewTenant"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PlateletAddNewTenantLambdaDataSourceServiceRoleD4D946B2",
            "Arn"
          ]
        }
      }
    },
    "InvokePlateletAddNewTenantLambdaDataSourceInvokePlateletAddNewTenantLambdaDataSourceAppSyncFunctionA106CFDC": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PlateletAddNewTenantLambdaDataSource",
            "Name"
          ]
        },
        "FunctionVersion": "2018-05-29",
        "Name": "InvokePlateletAddNewTenantLambdaDataSource",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletAddNewTenantLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletAddNewTenantLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PlateletAddNewTenantLambdaDataSource"
      ]
    },
    "MutationregisterTenantResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "registerTenant",
        "TypeName": "Mutation",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "MutationRegisterTenantAuthFNMutationRegisterTenantAuthFNAppSyncFunctionA8F7C20E",
                "FunctionId"
              ]
            },
            {
              "Fn::GetAtt": [
                "InvokePlateletAddNewTenantLambdaDataSourceInvokePlateletAddNewTenantLambdaDataSourceAppSyncFunctionA106CFDC",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": {
          "Fn::Join": [
            "",
            [
              "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Mutation\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"registerTenant\"))\n$util.qr($ctx.stash.put(\"authRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackauthRoleNameFB872D50Ref"
              },
              "/CognitoIdentityCredentials\"))\n$util.qr($ctx.stash.put(\"unauthRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackunauthRoleName49F3C1FERef"
              },
              "/CognitoIdentityCredentials\"))\n{}\n## [End] Stash resolver specific context.. **"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Mutation.registerTenant.res.vtl"
            ]
          ]
        }
      }
    },
    "PlateletAdminChangeUserRolesLambdaDataSourceServiceRoleFE1C78BE": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PlateletAdminChangeUserRolesLambdaDataSourceServiceRoleDefaultPolicy15A33209": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": {
                "Fn::If": [
                  "HasEnvironmentParameter",
                  {
                    "Fn::Sub": [
                      "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminChangeUserRoles-${env}",
                      {
                        "env": {
                          "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                        }
                      }
                    ]
                  },
                  {
                    "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminChangeUserRoles"
                  }
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PlateletAdminChangeUserRolesLambdaDataSourceServiceRoleDefaultPolicy15A33209",
        "Roles": [
          {
            "Ref": "PlateletAdminChangeUserRolesLambdaDataSourceServiceRoleFE1C78BE"
          }
        ]
      }
    },
    "PlateletAdminChangeUserRolesLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PlateletAdminChangeUserRolesLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminChangeUserRoles-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletAdminChangeUserRoles"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PlateletAdminChangeUserRolesLambdaDataSourceServiceRoleFE1C78BE",
            "Arn"
          ]
        }
      }
    },
    "InvokePlateletAdminChangeUserRolesLambdaDataSourceInvokePlateletAdminChangeUserRolesLambdaDataSourceAppSyncFunction88BEEC52": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PlateletAdminChangeUserRolesLambdaDataSource",
            "Name"
          ]
        },
        "FunctionVersion": "2018-05-29",
        "Name": "InvokePlateletAdminChangeUserRolesLambdaDataSource",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletAdminChangeUserRolesLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletAdminChangeUserRolesLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PlateletAdminChangeUserRolesLambdaDataSource"
      ]
    },
    "MutationupdateUserRolesResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "updateUserRoles",
        "TypeName": "Mutation",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "MutationUpdateUserRolesAuthFNMutationUpdateUserRolesAuthFNAppSyncFunction88F9188F",
                "FunctionId"
              ]
            },
            {
              "Fn::GetAtt": [
                "InvokePlateletAdminChangeUserRolesLambdaDataSourceInvokePlateletAdminChangeUserRolesLambdaDataSourceAppSyncFunction88BEEC52",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": {
          "Fn::Join": [
            "",
            [
              "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Mutation\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"updateUserRoles\"))\n$util.qr($ctx.stash.put(\"authRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackauthRoleNameFB872D50Ref"
              },
              "/CognitoIdentityCredentials\"))\n$util.qr($ctx.stash.put(\"unauthRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackunauthRoleName49F3C1FERef"
              },
              "/CognitoIdentityCredentials\"))\n{}\n## [End] Stash resolver specific context.. **"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Mutation.updateUserRoles.res.vtl"
            ]
          ]
        }
      }
    },
    "PlateletProfilePictureUploadURLResolverLambdaDataSourceServiceRole515F127C": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PlateletProfilePictureUploadURLResolverLambdaDataSourceServiceRoleDefaultPolicyC411E5F9": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": {
                "Fn::If": [
                  "HasEnvironmentParameter",
                  {
                    "Fn::Sub": [
                      "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureUploadURLResolver-${env}",
                      {
                        "env": {
                          "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                        }
                      }
                    ]
                  },
                  {
                    "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureUploadURLResolver"
                  }
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PlateletProfilePictureUploadURLResolverLambdaDataSourceServiceRoleDefaultPolicyC411E5F9",
        "Roles": [
          {
            "Ref": "PlateletProfilePictureUploadURLResolverLambdaDataSourceServiceRole515F127C"
          }
        ]
      }
    },
    "PlateletProfilePictureUploadURLResolverLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PlateletProfilePictureUploadURLResolverLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureUploadURLResolver-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletProfilePictureUploadURLResolver"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PlateletProfilePictureUploadURLResolverLambdaDataSourceServiceRole515F127C",
            "Arn"
          ]
        }
      }
    },
    "InvokePlateletProfilePictureUploadURLResolverLambdaDataSourceInvokePlateletProfilePictureUploadURLResolverLambdaDataSourceAppSyncFunction6E7C048C": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PlateletProfilePictureUploadURLResolverLambdaDataSource",
            "Name"
          ]
        },
        "FunctionVersion": "2018-05-29",
        "Name": "InvokePlateletProfilePictureUploadURLResolverLambdaDataSource",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletProfilePictureUploadURLResolverLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletProfilePictureUploadURLResolverLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PlateletProfilePictureUploadURLResolverLambdaDataSource"
      ]
    },
    "QueryprofilePictureUploadURLResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "profilePictureUploadURL",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "QueryProfilePictureUploadURLAuthFNQueryProfilePictureUploadURLAuthFNAppSyncFunctionE68E1B44",
                "FunctionId"
              ]
            },
            {
              "Fn::GetAtt": [
                "InvokePlateletProfilePictureUploadURLResolverLambdaDataSourceInvokePlateletProfilePictureUploadURLResolverLambdaDataSourceAppSyncFunction6E7C048C",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": {
          "Fn::Join": [
            "",
            [
              "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"profilePictureUploadURL\"))\n$util.qr($ctx.stash.put(\"authRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackauthRoleNameFB872D50Ref"
              },
              "/CognitoIdentityCredentials\"))\n$util.qr($ctx.stash.put(\"unauthRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackunauthRoleName49F3C1FERef"
              },
              "/CognitoIdentityCredentials\"))\n{}\n## [End] Stash resolver specific context.. **"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.profilePictureUploadURL.res.vtl"
            ]
          ]
        }
      }
    },
    "PlateletGetStatisticsLambdaDataSourceServiceRole46D180D4": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PlateletGetStatisticsLambdaDataSourceServiceRoleDefaultPolicy0015C9DB": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": {
                "Fn::If": [
                  "HasEnvironmentParameter",
                  {
                    "Fn::Sub": [
                      "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletGetStatistics-${env}",
                      {
                        "env": {
                          "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                        }
                      }
                    ]
                  },
                  {
                    "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletGetStatistics"
                  }
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PlateletGetStatisticsLambdaDataSourceServiceRoleDefaultPolicy0015C9DB",
        "Roles": [
          {
            "Ref": "PlateletGetStatisticsLambdaDataSourceServiceRole46D180D4"
          }
        ]
      }
    },
    "PlateletGetStatisticsLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PlateletGetStatisticsLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletGetStatistics-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:plateletGetStatistics"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PlateletGetStatisticsLambdaDataSourceServiceRole46D180D4",
            "Arn"
          ]
        }
      }
    },
    "InvokePlateletGetStatisticsLambdaDataSourceInvokePlateletGetStatisticsLambdaDataSourceAppSyncFunctionB5CC102A": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PlateletGetStatisticsLambdaDataSource",
            "Name"
          ]
        },
        "FunctionVersion": "2018-05-29",
        "Name": "InvokePlateletGetStatisticsLambdaDataSource",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletGetStatisticsLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePlateletGetStatisticsLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PlateletGetStatisticsLambdaDataSource"
      ]
    },
    "QuerygetStatisticsResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "getStatistics",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "QueryGetStatisticsAuthFNQueryGetStatisticsAuthFNAppSyncFunctionA4DE4387",
                "FunctionId"
              ]
            },
            {
              "Fn::GetAtt": [
                "InvokePlateletGetStatisticsLambdaDataSourceInvokePlateletGetStatisticsLambdaDataSourceAppSyncFunctionB5CC102A",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": {
          "Fn::Join": [
            "",
            [
              "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"getStatistics\"))\n$util.qr($ctx.stash.put(\"authRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackauthRoleNameFB872D50Ref"
              },
              "/CognitoIdentityCredentials\"))\n$util.qr($ctx.stash.put(\"unauthRole\", \"arn:aws:sts::",
              {
                "Ref": "AWS::AccountId"
              },
              ":assumed-role/",
              {
                "Ref": "referencetotransformerrootstackunauthRoleName49F3C1FERef"
              },
              "/CognitoIdentityCredentials\"))\n{}\n## [End] Stash resolver specific context.. **"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.getStatistics.res.vtl"
            ]
          ]
        }
      }
    },
    "MutationRegisterUserAuthFNMutationRegisterUserAuthFNAppSyncFunctionA363AAEB": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Ref": "referencetotransformerrootstackGraphQLAPINONEDS2BA9D1C8Name"
        },
        "FunctionVersion": "2018-05-29",
        "Name": "MutationRegisterUserAuthFN",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Mutation.registerUser.auth.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplate": "$util.toJson({})"
      }
    },
    "MutationRegisterTenantAuthFNMutationRegisterTenantAuthFNAppSyncFunctionA8F7C20E": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Ref": "referencetotransformerrootstackGraphQLAPINONEDS2BA9D1C8Name"
        },
        "FunctionVersion": "2018-05-29",
        "Name": "MutationRegisterTenantAuthFN",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Mutation.registerTenant.auth.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplate": "$util.toJson({})"
      }
    },
    "MutationUpdateUserRolesAuthFNMutationUpdateUserRolesAuthFNAppSyncFunction88F9188F": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Ref": "referencetotransformerrootstackGraphQLAPINONEDS2BA9D1C8Name"
        },
        "FunctionVersion": "2018-05-29",
        "Name": "MutationUpdateUserRolesAuthFN",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Mutation.updateUserRoles.auth.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplate": "$util.toJson({})"
      }
    },
    "QueryProfilePictureUploadURLAuthFNQueryProfilePictureUploadURLAuthFNAppSyncFunctionE68E1B44": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Ref": "referencetotransformerrootstackGraphQLAPINONEDS2BA9D1C8Name"
        },
        "FunctionVersion": "2018-05-29",
        "Name": "QueryProfilePictureUploadURLAuthFN",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.profilePictureUploadURL.auth.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplate": "$util.toJson({})"
      }
    },
    "QueryGetStatisticsAuthFNQueryGetStatisticsAuthFNAppSyncFunctionA4DE4387": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Ref": "referencetotransformerrootstackGraphQLAPINONEDS2BA9D1C8Name"
        },
        "FunctionVersion": "2018-05-29",
        "Name": "QueryGetStatisticsAuthFN",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.getStatistics.auth.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplate": "$util.toJson({})"
      }
    }
  },
  "Parameters": {
    "referencetotransformerrootstackenv10C5A902Ref": {
      "Type": "String"
    },
    "referencetotransformerrootstackGraphQLAPI20497F53ApiId": {
      "Type": "String"
    },
    "referencetotransformerrootstackS3DeploymentBucket7592718ARef": {
      "Type": "String"
    },
    "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref": {
      "Type": "String"
    },
    "referencetotransformerrootstackauthRoleNameFB872D50Ref": {
      "Type": "String"
    },
    "referencetotransformerrootstackunauthRoleName49F3C1FERef": {
      "Type": "String"
    },
    "referencetotransformerrootstackGraphQLAPINONEDS2BA9D1C8Name": {
      "Type": "String"
    }
  }
}